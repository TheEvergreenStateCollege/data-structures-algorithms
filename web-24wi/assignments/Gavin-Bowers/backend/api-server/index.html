<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/static/css/styles.css">
    <title>Ambience Music Player</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <style>@import url('https://fonts.googleapis.com/css2?family=Nunito+Sans:opsz@6..12&display=swap');</style>
</head>
<body>
    <div id="auth-window">
        <div id="auth-container">
            <div id="auth-top-row" style="display: flex">
                <p id="auth-label">Login</p>
                <button id="exit-auth" onclick="hideAuthWindow()">
                    <span class="material-symbols-outlined" id="close-auth-icon">
                        cancel
                    </span>
                </button>
            </div>
            <form id="login-form" onsubmit="handleAuthForm(event, 'login')">
                <input placeholder="username" id="login-username" autocomplete="username" required>
                <input placeholder="password" type="password" id="login-password" autocomplete="webauthn current-password" required>
                <button class="auth-button">Submit</button>
            </form>
            <form id="register-form" onsubmit="handleAuthForm(event, 'register')">
                <input placeholder="username" id="register-username" required>
                <input placeholder="password" type="password" id="register-password" required>
                <button class="auth-button">Submit</button>
            </form>
            <p id="auth-feedback"></p>
        </div>
    </div>
    <div id="content-container">
        <div id="top-row">
            <button onclick="showMyPlaylist()" class="music-selector-button" id="playlist-button">
                My Playlist
            </button>
            <button onclick="toggleEditMode()" id="edit-button" aria-label="edit">
                <span class="material-symbols-outlined" id="edit-icon">
                    edit
                </span>
            </button>
            <button onclick="savePlaylist()" id="save-button">
                <span class="material-symbols-outlined" id="save-icon">
                    save
                </span>
            </button>
            <!-- <button onclick="getPlaylist()" style="color: rgb(240, 240, 240); border: 1px solid black">
                <span class="material-symbols-outlined" id="load-icon">
                    load
                </span>
            </button> -->
            <div id="music-selector">
                <button onclick="showMusicCategory(0)" class="music-selector-button">
                    Halley Labs Mix
                </button>
                <button onclick="showMusicCategory(1)" class="music-selector-button">
                    Progressive
                </button>
                <button onclick="showMusicCategory(2)" class="music-selector-button">
                    Chill Vibes
                </button>
            </div>
            <div id="top-right-buttons">
                <div class="info-dropdown">
                    <button class="info-dropbtn" id="info-button">
                        <span class="material-symbols-outlined" id="info-icon">
                            info
                        </span>
                    </button>
                    <div class="info-dropdown-content">
                        <p>Hello. to use this website, click on one of the playlists at the top of the screen.
                            You can click on songs to play them, and drag songs to move them around.
                            Clicking the pencil icon will turn on edit mode, which allows you to add songs
                            to your playlist or remove them. Clicking the save button will save your playlist,
                            if you are logged in. It only saves if you are viewing your playlist and shuffle is off.
                            Use the login or register options to make an account or login. Registering will also log
                            you in. When you log in, any saved playlist you have will be retrieved.
                        </p>
                    </div>
                </div>
                <div class="auth-dropdown">
                    <button class="dropbtn">
                        <span class="material-symbols-outlined" id="account-icon">
                            account_circle
                        </span>
                    </button>
                    <div class="dropdown-content">
                        <a href="#" onclick="showLogin()">Login</a>
                        <a href="#" onclick="showRegister()">Register</a>
                    </div>
                </div>
            </div>
        </div>
        <div id="playlist-section">
            <div id="playlist-container">
                <ul id="playlist">
                </ul>
            </div>
            <div class="controls"  id="playlist-controls">

            </div>
            <div id="music-list">

            </div>
        </div>
        <div id="music-bar">
            <div id="music-info-container">
                <p class="music-info" id="current-artist">Artist</p>
                <span class="music-info material-symbols-outlined" id="music-info-separator">
                    remove
                </span>
                <p class="music-info" id="current-title">Currently Playing Song</p>
            </div>
            <div id="music-player-container">
                <div id="playback-controls">
                    <button onclick="toggleRepeat()" class="playback-button" aria-label="loop song">
                        <span class="material-symbols-outlined" id="loop-icon">
                            repeat
                        </span>
                    </button>
                    <button onclick="previousSong()" class="playback-button" aria-label="previous song">
                        <span class="material-symbols-outlined" id="back-icon">
                            skip_previous
                        </span>
                    </button>
                    <button onclick="playAudio()" class="playback-button" aria-label="play">
                        <span class="material-symbols-outlined" id="play-icon">
                            play_arrow
                        </span>
                    </button>
                    <button onclick="nextSong()" class="playback-button" aria-label="next song">
                        <span class="material-symbols-outlined" id="next-icon">
                            skip_next
                        </span>
                    </button>
                    <button onclick="toggleShuffle()" class="playback-button" aria-label="shuffle">
                        <span class="material-symbols-outlined" id="shuffle-icon">
                            shuffle
                        </span>
                    </button>
                    <div id="volume-dropdown">
                        <div id="volume-dropdown-content">
                            <input type="range" id="volume-slider" max="100" value="50">
                        </div>
                        <button onclick="toggleMute()" id="volume-button" aria-label="volume">
                            <span class="material-symbols-outlined" id="volume-icon">
                                volume_up
                            </span>
                        </button>
                    </div>
                </div>
                <div id="music-tracker-container">
                    <input type="range" class="music-tracker" id="music-tracker" oninput="seekAudio()" min="0" max="5000" value="0">
                    <audio id="current-audio"></audio>
                </div>
            </div>
        </div>
    </div>
    <script src="/static/js/main.js"></script>
</body>
</html>